<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <script src="scripts/jquery-3.3.1.min.js"></script>
    <meta charset="utf-8" />
    <title></title>
    <script>
        $(window).on("load", function () {

            var htmlConsole = $("#console");
            var websocket;

            $("#connect").on("click", function () {
                websocket = new WebSocket('ws://localhost:54873/ws', ['soup', 'xmpp']);
                websocket.onopen = function () {
                    htmlConsole.text(htmlConsole.text() + 'Connected\n');
                };

                websocket.onerror = function () {
                    htmlConsole.text(htmlConsole.text() + 'Error\n');
                }; 

                websocket.onmessage = function (e) {
                    htmlConsole.text(htmlConsole.text()+ 'Response: ' + e.data + '\n');
                };

                websocket.onclose = function () {
                    htmlConsole.text(htmlConsole.text() + 'Disconnected\n');
                }

            })

            $("#send").on("click", function () {
                if (websocket.readyState == WebSocket.OPEN) {
                    websocket.send('labas');
                    htmlConsole.text(htmlConsole.text() + 'Sent: labas\n');
                }
                else {
                    htmlConsole.text(htmlConsole.text() + 'Not Connected\n');
                }
            })


            $("#disconnect").on("click", function () {
                websocket.close();
            })
        })
    </script>
    <style>
        body {
            margin: auto;
            width: 300px;
        }

        #console {
            margin-top: 50px;
            height: 500px;
            width: 300px;
            overflow-y: scroll;
        }

        .buttons{
            margin: 10px 5px 0px 5px;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div>
        <textarea id="console" readonly ></textarea>
    </div>
    <div class="buttons">
        <input id="connect" value="Connect" type="button" class="btn btn-primary" />
        <input id="send" value="Send" type="button" class="btn btn-primary" />
        <input id="disconnect" value="Disconnect" type="button" class="btn btn-primary" />
    </div>
</body>
</html>